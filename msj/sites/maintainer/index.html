<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Investment Growth Calculator</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <meta name="theme-color" content="#0f172a" />
  </head>
  <body>
    <aside class="sidebar" aria-label="Main navigation">

      <!-- Home/Calculator -->
      <button
        class="nav-item active"
        id="nav-calculator"
        title="Calculator"
        aria-label="Calculator"
      >
        <svg
          viewBox="0 0 24 24"
          width="22"
          height="22"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M3 9l9-7 9 7v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
      </button>

      <!-- History -->
      <button
        class="nav-item"
        id="nav-history"
        title="History"
        aria-label="History"
      >
        <svg
          viewBox="0 0 24 24"
          width="22"
          height="22"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <polyline points="1 4 1 10 7 10"></polyline>
          <path d="M3.51 15a9 9 0 102.13-9.36L1 10"></path>
          <line x1="12" y1="7" x2="12" y2="12"></line>
          <line x1="12" y1="12" x2="15" y2="15"></line>
        </svg>
      </button>

      <div class="sidebar-spacer"></div>

      <!-- Settings at bottom -->
      <button
        class="nav-item"
        id="nav-settings"
        title="Settings"
        aria-label="Settings"
      >
        <svg
          viewBox="0 0 24 24"
          width="22"
          height="22"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <circle cx="12" cy="12" r="3"></circle>
          <path
            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09A1.65 1.65 0 0 0 8 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 3 15.4a1.65 1.65 0 0 0-1.51-1H1a2 2 0 1 1 0-4h.09A1.65 1.65 0 0 0 3 8.6a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 8 3.6a1.65 1.65 0 0 0 1-1.51V2a2 2 0 1 1 4 0v.09A1.65 1.65 0 0 0 15.4 3a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 21 8.6a1.65 1.65 0 0 0 1.51 1H23a2 2 0 1 1 0 4h-.09A1.65 1.65 0 0 0 19.4 15z"
          ></path>
        </svg>
      </button>
    </aside>
    <div class="app-main">
      <h1>Savings Tracker</h1>

      <section id="view-calculator">
        <div class="dashboard">
          <!-- Left Column - Savings Tracker -->
          <div class="dashboard-column">
            <div class="card calculator-card">
              <h2>Investment Calculator</h2>

              <!-- Currency selector -->
              <div class="form-group">
                <label>Currency</label>
                <div
                  class="segmented"
                  id="currency-group"
                  aria-label="Select currency"
                >
                  <button
                    type="button"
                    class="segment active"
                    data-code="USD"
                    data-symbol="$"
                  >
                    $
                  </button>
                  <button
                    type="button"
                    class="segment"
                    data-code="EUR"
                    data-symbol="€"
                  >
                    €
                  </button>
                  <button
                    type="button"
                    class="segment"
                    data-code="GBP"
                    data-symbol="£"
                  >
                    £
                  </button>
                  <button
                    type="button"
                    class="segment"
                    data-code="INR"
                    data-symbol="₹"
                  >
                    ₹
                  </button>
                  <button
                    type="button"
                    class="segment"
                    data-code="JPY"
                    data-symbol="¥"
                  >
                    ¥
                  </button>
                </div>
              </div>

              <!-- Principal amount -->
              <div class="form-group">
                <label for="initial-amount">Principal Amount</label>
                <div class="input-wrapper">
                  <span class="input-prefix" id="currency-prefix">$</span>
                  <input
                    type="number"
                    id="initial-amount"
                    value="100"
                    min="0"
                    step="0.01"
                  />
                </div>
              </div>

              <!-- Interest Rate per year -->
              <div class="form-group grid-2">
                <div>
                  <label for="annual-rate">Interest Rate</label>
                  <div class="input-wrapper">
                    <input
                      type="number"
                      id="annual-rate"
                      value="5"
                      min="0"
                      step="0.1"
                    />
                    <span class="input-suffix">%</span>
                  </div>
                </div>
                <div>
                  <label>&nbsp;</label>
                  <div class="select-wrapper">
                    <select id="rate-period">
                      <option value="per_year">% per year</option>
                      <option value="per_month">% per month</option>
                      <option value="per_day" selected>% per day</option>
                    </select>
                  </div>
                </div>
              </div>

              <!-- Time Period -->
              <div class="form-group grid-3">
                <div>
                  <label for="years">Years</label>
                  <input type="number" id="years" value="0" min="0" step="1" />
                </div>
                <div>
                  <label for="months">Months</label>
                  <input type="number" id="months" value="0" min="0" step="1" />
                </div>
                <div>
                  <label for="days">Days</label>
                  <input type="number" id="days" value="0" min="0" step="1" />
                </div>
              </div>

              <!-- Include weekends toggle -->
              <div class="form-group">
                <label>Include all days of week?</label>
                <div class="segmented" id="weekends-toggle" role="tablist">
                  <button
                    type="button"
                    class="segment active"
                    data-include="true"
                  >
                    Yes
                  </button>
                  <button type="button" class="segment" data-include="false">
                    No
                  </button>
                </div>
              </div>

              <!-- Day of week selector (shown when Include all days = No) -->
              <div class="form-group" id="day-selector" style="display: none;">
                <label>Select days to include</label>
                <div class="day-checkboxes">
                  <label class="day-checkbox-label">
                    <input type="checkbox" class="day-checkbox" data-day="0" checked>
                    <span>Sun</span>
                  </label>
                  <label class="day-checkbox-label">
                    <input type="checkbox" class="day-checkbox" data-day="1" checked>
                    <span>Mon</span>
                  </label>
                  <label class="day-checkbox-label">
                    <input type="checkbox" class="day-checkbox" data-day="2" checked>
                    <span>Tue</span>
                  </label>
                  <label class="day-checkbox-label">
                    <input type="checkbox" class="day-checkbox" data-day="3" checked>
                    <span>Wed</span>
                  </label>
                  <label class="day-checkbox-label">
                    <input type="checkbox" class="day-checkbox" data-day="4" checked>
                    <span>Thu</span>
                  </label>
                  <label class="day-checkbox-label">
                    <input type="checkbox" class="day-checkbox" data-day="5" checked>
                    <span>Fri</span>
                  </label>
                  <label class="day-checkbox-label">
                    <input type="checkbox" class="day-checkbox" data-day="6" checked>
                    <span>Sat</span>
                  </label>
                </div>
              </div>

              <!-- Daily reinvest rate -->
              <div class="form-group">
                <label for="reinvest">Daily reinvest rate</label>
                <div class="select-wrapper">
                  <select id="reinvest">
                    <option value="1" selected>100%</option>
                    <option value="0.75">75%</option>
                    <option value="0.5">50%</option>
                    <option value="0.25">25%</option>
                    <option value="0">0% (no compounding)</option>
                  </select>
                </div>
              </div>

              <!-- Additional contributions -->
              <div class="form-group">
                <label>Additional contributions (optional)</label>
                <div class="segmented" id="contrib-type">
                  <button type="button" class="segment active" data-type="none">
                    None
                  </button>
                  <button type="button" class="segment" data-type="deposit">
                    Deposits
                  </button>
                  <button type="button" class="segment" data-type="withdraw">
                    Withdrawals
                  </button>
                </div>
                <div
                  class="contrib-fields"
                  id="contrib-fields"
                  style="display: none"
                >
                  <div class="grid-2">
                    <div class="input-wrapper">
                      <span class="input-prefix" id="contrib-prefix">$</span>
                      <input
                        type="number"
                        id="contrib-amount"
                        value="0"
                        min="0"
                        step="0.01"
                        placeholder="Amount"
                      />
                    </div>
                    <div class="select-wrapper">
                      <select id="contrib-frequency">
                        <option value="daily">Daily</option>
                        <option value="weekly" selected>Weekly</option>
                        <option value="monthly">Monthly</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Start date -->
              <div class="form-group">
                <label for="start-date">Start date?</label>
                <input type="date" id="start-date" />
              </div>

              <button id="calculate-btn" class="btn-primary">Calculate</button>

              <div class="result">
                <div class="result-item">
                  <span class="result-label">Days to Reach Goal:</span>
                  <span id="days-to-goal" class="result-value">-</span>
                </div>
                <div class="result-item">
                  <span class="result-label">Final Amount:</span>
                  <span id="final-amount" class="result-value">-</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Right Column - Current Savings -->
          <div class="dashboard-column">
            <div class="card" id="current-savings-card">
              <h2>Current Savings</h2>
              <div class="form-group">
                <label for="current-amount">Enter Your Current Savings</label>
                <div class="input-wrapper">
                  <span class="input-prefix">$</span>
                  <input
                    type="number"
                    id="current-amount"
                    placeholder="0.00"
                    min="0"
                    step="0.01"
                    inputmode="decimal"
                    aria-label="Enter your current savings amount"
                  />
                  <button id="update-progress" aria-label="Update savings">
                    <span>Update</span>
                    <svg
                      width="18"
                      height="18"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M4 12H20M20 12L14 6M20 12L14 18"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                  </button>
                </div>
                <div id="progress-message" class="progress-message"></div>
              </div>

              <div class="summary-cards">
                <div class="card">
                  <div class="card-label">Current Value</div>
                  <div class="card-value" id="current-value">$100.00</div>
                  <div class="card-detail">Initial Investment: $100.00</div>
                </div>

                <div class="card">
                  <div class="card-label">Current Day</div>
                  <div class="card-value" id="days-elapsed">0</div>
                  <div class="card-detail">
                    Next day: $<span id="next-day-amount">0.00</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="view-history" hidden>
        <div class="dashboard history-layout">
          <!-- Left: history list -->
          <div class="dashboard-column history-left">
            <div class="card history-card">
              <h2>Calculation History</h2>
              <div class="history-toolbar">
                <input id="history-search" type="search" placeholder="Search history (title, date, currency)" aria-label="Search history" />
              </div>
              <div id="history-list" class="history-list"></div>
            </div>
          </div>
          <!-- Right: sticky preview + current savings -->
          <div class="dashboard-column history-right">
            <div id="history-savings-container"></div>
            <div class="card" id="history-preview">
              <h2>Preview</h2>
              <div class="history-preview-body" id="history-preview-body">
                <div class="history-empty">Select an item from the list to see details.</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <div class="calendar-container">
        <h2>Investment Growth Timeline</h2>
        <div class="calendar" id="calendar">
          <!-- Calendar will be generated by JavaScript -->
        </div>
      </div>

      <!-- Settings Button (inside main) -->
      <button
        id="settings-btn"
        class="settings-btn"
        aria-label="Open settings"
        title="Settings"
      >
        <svg
          viewBox="0 0 24 24"
          width="20"
          height="20"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <circle cx="12" cy="12" r="3"></circle>
          <path
            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09A1.65 1.65 0 0 0 8 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 3 15.4a1.65 1.65 0 0 0-1.51-1H1a2 2 0 1 1 0 4h.09A1.65 1.65 0 0 0 3 8.6a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 8 3.6a1.65 1.65 0 0 0 1-1.51V2a2 2 0 1 1 4 0v.09A1.65 1.65 0 0 0 15.4 3a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 21 8.6a1.65 1.65 0 0 0 1.51 1H23a2 2 0 1 1 0 4h-.09A1.65 1.65 0 0 0 19.4 15z"
          ></path>
        </svg>
      </button>

    </div>
    <!-- /.app-main -->

    <!-- Settings Modal (moved outside .app-main to overlay viewport) -->
    <div id="settings-modal" class="settings-modal" aria-hidden="true">
      <div class="settings-backdrop" id="settings-close-backdrop"></div>
      <div class="settings-panel" role="dialog" aria-modal="true" aria-labelledby="settings-title">
        <div class="settings-header">
          <h3 id="settings-title">Theme Settings</h3>
          <button class="settings-close" id="settings-close" aria-label="Close settings">×</button>
        </div>
        <div class="settings-body">
          <h4 style="grid-column: 1 / -1; color: var(--text-color); margin: 6px 0">Preset</h4>
          <div class="settings-presets" style="grid-column: 1 / -1; display:flex; gap:8px; flex-wrap:wrap;">
            <button id="preset-violet-rose" class="preset-btn" type="button">Violet Rose</button>
          </div>
          <h4 style="grid-column: 1 / -1; color: var(--text-color); margin: 8px 0 6px">Theme Colors</h4>
          <div class="settings-row">
            <label for="simple-primary">Primary</label>
            <input type="color" id="simple-primary" value="#E0569A">
          </div>
          <div class="settings-row">
            <label for="simple-secondary">Secondary</label>
            <input type="color" id="simple-secondary" value="#FFB0B8">
          </div>
          <div class="settings-row">
            <label for="simple-bg">Background</label>
            <input type="color" id="simple-bg" value="#2D155A">
          </div>
          <div class="settings-row">
            <label for="simple-text">Text</label>
            <input type="color" id="simple-text" value="#FCE7F3">
          </div>
        </div>
        <div class="settings-footer">
          <button class="btn-secondary" id="settings-reset">Reset</button>
          <button class="btn-primary" id="settings-save">Save</button>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
